#!/opt/homebrew/bin/bash
# This hook is sourced after a new virtualenv is activated.

VIRTUAL_ENV_NAME=$(basename "${VIRTUAL_ENV}")

# Set PROJECT_HOME if not already set
if [ -z "${PROJECT_HOME}" ]; then
  export PROJECT_HOME="${HOME}/Projects"
fi

# Create project directory for this virtualenv
PROJECT_SRC="${PROJECT_HOME}/${VIRTUAL_ENV_NAME}"
if [ ! -d "${PROJECT_SRC}" ]; then
  mkdir -p "${PROJECT_SRC}"
  echo "Created project directory: ${PROJECT_SRC}"
fi

# Call the just recipe if it exists
if [ -f "${HOME}/justfile" ]; then
  just --justfile="${HOME}/justfile" virtualenvwrapper::postmkvirtualenv 2>/dev/null || true
fi
